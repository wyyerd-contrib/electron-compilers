'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _compilerBase = require('../compiler-base');

const inputMimeTypes = ['text/graphql'];
let gql = null;

class GraphQLCompiler extends _compilerBase.SimpleCompilerBase {
  constructor() {
    super();
  }

  static getInputMimeTypes() {
    return inputMimeTypes;
  }

  compileSync(sourceCode) {
    gql = gql || require('graphql-tag/loader');
    // This is a stub, original loader calls webpack-specific this.cacheable()
    const webpackLoaderStub = {
      cacheable: () => {}
    };
    const loader = gql.bind(webpackLoaderStub);

    const js = loader(sourceCode);

    return {
      code: js,
      mimeType: 'application/javascript'
    };
  }

  getCompilerVersion() {
    return require('graphql-tag/package.json').version;
  }
}
exports.default = GraphQLCompiler;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qcy9ncmFwaHFsLmpzIl0sIm5hbWVzIjpbImlucHV0TWltZVR5cGVzIiwiZ3FsIiwiR3JhcGhRTENvbXBpbGVyIiwiY29uc3RydWN0b3IiLCJnZXRJbnB1dE1pbWVUeXBlcyIsImNvbXBpbGVTeW5jIiwic291cmNlQ29kZSIsInJlcXVpcmUiLCJ3ZWJwYWNrTG9hZGVyU3R1YiIsImNhY2hlYWJsZSIsImxvYWRlciIsImJpbmQiLCJqcyIsImNvZGUiLCJtaW1lVHlwZSIsImdldENvbXBpbGVyVmVyc2lvbiIsInZlcnNpb24iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOztBQUVBLE1BQU1BLGlCQUFpQixDQUFDLGNBQUQsQ0FBdkI7QUFDQSxJQUFJQyxNQUFNLElBQVY7O0FBRWUsTUFBTUMsZUFBTiwwQ0FBaUQ7QUFDOURDLGdCQUFjO0FBQ1o7QUFDRDs7QUFFRCxTQUFPQyxpQkFBUCxHQUEyQjtBQUN6QixXQUFPSixjQUFQO0FBQ0Q7O0FBRURLLGNBQVlDLFVBQVosRUFBd0I7QUFDdEJMLFVBQU1BLE9BQU9NLFFBQVEsb0JBQVIsQ0FBYjtBQUNBO0FBQ0EsVUFBTUMsb0JBQW9CO0FBQ3hCQyxpQkFBVyxNQUFNLENBQUU7QUFESyxLQUExQjtBQUdBLFVBQU1DLFNBQVNULElBQUlVLElBQUosQ0FBU0gsaUJBQVQsQ0FBZjs7QUFFQSxVQUFNSSxLQUFLRixPQUFPSixVQUFQLENBQVg7O0FBRUEsV0FBTztBQUNMTyxZQUFNRCxFQUREO0FBRUxFLGdCQUFVO0FBRkwsS0FBUDtBQUlEOztBQUVEQyx1QkFBcUI7QUFDbkIsV0FBT1IsUUFBUSwwQkFBUixFQUFvQ1MsT0FBM0M7QUFDRDtBQTNCNkQ7a0JBQTNDZCxlIiwiZmlsZSI6ImdyYXBocWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1NpbXBsZUNvbXBpbGVyQmFzZX0gZnJvbSAnLi4vY29tcGlsZXItYmFzZSc7XG5cbmNvbnN0IGlucHV0TWltZVR5cGVzID0gWyd0ZXh0L2dyYXBocWwnXTtcbmxldCBncWwgPSBudWxsO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcmFwaFFMQ29tcGlsZXIgZXh0ZW5kcyBTaW1wbGVDb21waWxlckJhc2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgc3RhdGljIGdldElucHV0TWltZVR5cGVzKCkge1xuICAgIHJldHVybiBpbnB1dE1pbWVUeXBlcztcbiAgfVxuXG4gIGNvbXBpbGVTeW5jKHNvdXJjZUNvZGUpIHtcbiAgICBncWwgPSBncWwgfHwgcmVxdWlyZSgnZ3JhcGhxbC10YWcvbG9hZGVyJyk7XG4gICAgLy8gVGhpcyBpcyBhIHN0dWIsIG9yaWdpbmFsIGxvYWRlciBjYWxscyB3ZWJwYWNrLXNwZWNpZmljIHRoaXMuY2FjaGVhYmxlKClcbiAgICBjb25zdCB3ZWJwYWNrTG9hZGVyU3R1YiA9IHtcbiAgICAgIGNhY2hlYWJsZTogKCkgPT4ge31cbiAgICB9O1xuICAgIGNvbnN0IGxvYWRlciA9IGdxbC5iaW5kKHdlYnBhY2tMb2FkZXJTdHViKTtcblxuICAgIGNvbnN0IGpzID0gbG9hZGVyKHNvdXJjZUNvZGUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvZGU6IGpzLFxuICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0J1xuICAgIH07XG4gIH1cblxuICBnZXRDb21waWxlclZlcnNpb24oKSB7XG4gICAgcmV0dXJuIHJlcXVpcmUoJ2dyYXBocWwtdGFnL3BhY2thZ2UuanNvbicpLnZlcnNpb247XG4gIH1cbn1cbiJdfQ==